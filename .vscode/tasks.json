{
    // See https://go.microsoft.com/fwlink/?LinkId=733558
    // for the documentation about the tasks.json format
    "version": "2.0.0",
    "tasks": [
        
        {
            "label": "f7_task",
            "detail": "a composite task that we will bind to the f7 key in the global keybindings.",
            "dependsOn": ["run_rpyc_playground"]
        },
        {
            "label": "f8_task",
            "detail": "a composite task that we will bind to the f8 key in the global keybindings.",
            "dependsOn": ["reload_fusion_script_runner_addin_with_keystrokes"]
            // "dependsOn": ["reload_fusion_script_runner_addin_then_monitor_log"]
        },



        {
            "label": "execute_with_python",
            "type":"shell",
            "command": "${config:python.pythonPath} \"${file}\""
        },
        {
            "label": "run_rpyc_playground",
            "type":"shell",
            "command": "${config:python.pythonPath} \"${workspaceFolder}${pathSeparator}rpyc_playground.py\""
        },

        {
            "label": "reload_fusion_script_runner_addin_with_keystrokes",
            "type":"shell",
            "command": "autohotkey \"${workspaceFolder}${pathSeparator}reload_fusion_addin.ahk\" fusion_script_runner_addin\"",
            "presentation": {
                "reveal": "always",
                "showReuseMessage": false
                }
        },
        {
            "label": "monitor_fusion_script_runnner_addin_log",
            "type":"shell",
            "command": "tail -F '${workspaceFolder}${pathSeparator}fusion_script_runner_addin${pathSeparator}fusion_script_runner_addin_log.log'",
            "presentation": {
                "reveal": "always",
                "showReuseMessage": false
                },
            "options": {"shell": {"executable": "C:\\cygwin64\\bin\\bash.exe","args": ["-c"]}},
            "isBackground":true,

        },
        {
            "label": "reload_fusion_script_runner_addin_then_monitor_log",
            "dependsOn": [
                "reload_fusion_script_runner_addin_with_keystrokes",
                "monitor_fusion_script_runnner_addin_log"
            ],
            "dependsOrder": "sequence"
        },
        {
            "label":"restart_fusion",
            "type":"shell",
            "command": "taskkill /f /t /im Fusion360.exe & (start \"\" Fusion360 --nologo)",
            "presentation": {"reveal": "silent"}
            
        },
        {
            "label":"restart_fusion_with_debugpy_log_dir_defined",
            "type":"shell",
            "command": "taskkill /f /t /im Fusion360.exe & (set \"DEBUGPY_LOG_DIR=C:/work/fusion_programmatic_experiment/debugpy_log\" && start \"\" Fusion360 --nologo)",
            "presentation": {"reveal": "silent"}            
        },
        {
            "label":"monitor_the_log",
            "type":"shell",
            "command": "tail -F \"${env:TEMP}${pathSeparator}fusion_script_runner_addin_log.log\"",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel":  "dedicated",
                "showReuseMessage": false,
                "clear": false
            },
            "isBackground": true
        },
        {
            "label":"run_script_in_fusion_without_debugging",
            "type":"shell",
            "command": "${config:python.pythonPath} \"${workspaceFolder}${pathSeparator}fusion_script_runner_addin${pathSeparator}run_script_in_fusion.py\"",
            "args":[
                "--script", "${file}",
                "--debug", "0",
                "--debugpy_path", "C:/Users/Admin/.vscode/extensions/ms-python.python-2021.6.944021595/pythonFiles/lib/python",
                "--addin_port", "19812",
                "--debug_port", "9000"
            ]
        },
        {
            "label":"run_script_in_fusion_with_debugging",
            "type":"shell",
            "command": "${config:python.pythonPath} \"${workspaceFolder}${pathSeparator}fusion_script_runner_addin${pathSeparator}run_script_in_fusion.py\"",
            "args":[
                "--script", "${file}",
                "--debug", "1",
                "--debugpy_path", "C:/Users/Admin/.vscode/extensions/ms-python.python-2021.6.944021595/pythonFiles/lib/python",
                "--addin_port", "19812",
                "--debug_port", "9000"
            ]
        }
    ]

}